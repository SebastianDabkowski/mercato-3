@page
@model MercatoApp.Pages.Admin.CommissionInvoices.SettingsModel
@{
    ViewData["Title"] = "Commission Invoice Settings - Admin";
}

<div class="container-fluid my-4">
    <div class="row mb-4">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/Admin/CommissionInvoices">Commission Invoices</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Settings</li>
                </ol>
            </nav>
            <h1 class="mb-3">
                <i class="bi bi-gear"></i> Commission Invoice Settings
            </h1>
        </div>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            @TempData["SuccessMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            @TempData["ErrorMessage"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    <form method="post">
        @Html.AntiForgeryToken()

        <!-- Tax and Payment Settings -->
        <div class="card mb-4">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-calculator"></i> Tax and Payment Settings
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="DefaultTaxPercentage" class="form-label">Default Tax Percentage</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="DefaultTaxPercentage" 
                                asp-for="Config.DefaultTaxPercentage" 
                                step="0.01" min="0" max="100" required />
                            <span class="input-group-text">%</span>
                        </div>
                        <div class="form-text">Applied to all commission invoices unless overridden.</div>
                        <span asp-validation-for="Config.DefaultTaxPercentage" class="text-danger"></span>
                    </div>

                    <div class="col-md-6">
                        <label for="InvoiceDueDays" class="form-label">Invoice Due Days</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="InvoiceDueDays" 
                                asp-for="Config.InvoiceDueDays" 
                                min="1" max="365" required />
                            <span class="input-group-text">days</span>
                        </div>
                        <div class="form-text">Number of days after issue date that invoice is due.</div>
                        <span asp-validation-for="Config.InvoiceDueDays" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Generation Settings -->
        <div class="card mb-4">
            <div class="card-header bg-secondary text-white">
                <h5 class="mb-0">
                    <i class="bi bi-calendar-check"></i> Generation Settings
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="GenerationDayOfMonth" class="form-label">Generation Day of Month</label>
                        <input type="number" class="form-control" id="GenerationDayOfMonth" 
                            asp-for="Config.GenerationDayOfMonth" 
                            min="1" max="28" required />
                        <div class="form-text">Day of month to automatically generate invoices (1-28).</div>
                        <span asp-validation-for="Config.GenerationDayOfMonth" class="text-danger"></span>
                    </div>

                    <div class="col-md-6">
                        <div class="form-check mt-4">
                            <input type="checkbox" class="form-check-input" id="AutoGenerateEnabled" 
                                asp-for="Config.AutoGenerateEnabled" />
                            <label class="form-check-label" for="AutoGenerateEnabled">
                                Enable Automatic Generation
                            </label>
                        </div>
                        <div class="form-text">Automatically generate invoices on the specified day.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Company Information -->
        <div class="card mb-4">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0">
                    <i class="bi bi-building"></i> Company Information
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label for="CompanyName" class="form-label">Company Name</label>
                        <input type="text" class="form-control" id="CompanyName" 
                            asp-for="Config.CompanyName" maxlength="200" required />
                        <div class="form-text">Your platform or company name on invoices.</div>
                        <span asp-validation-for="Config.CompanyName" class="text-danger"></span>
                    </div>

                    <div class="col-md-6">
                        <label for="CompanyTaxId" class="form-label">Company Tax ID</label>
                        <input type="text" class="form-control" id="CompanyTaxId" 
                            asp-for="Config.CompanyTaxId" maxlength="100" />
                        <div class="form-text">Your tax identification number.</div>
                    </div>

                    <div class="col-12">
                        <label for="CompanyAddress" class="form-label">Company Address</label>
                        <textarea class="form-control" id="CompanyAddress" 
                            asp-for="Config.CompanyAddress" rows="3" maxlength="500"></textarea>
                        <div class="form-text">Your company's address for invoices.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Terms and Conditions -->
        <div class="card mb-4">
            <div class="card-header bg-warning">
                <h5 class="mb-0">
                    <i class="bi bi-file-text"></i> Terms and Conditions
                </h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    <div class="col-12">
                        <label for="TermsAndConditions" class="form-label">Terms and Conditions</label>
                        <textarea class="form-control" id="TermsAndConditions" 
                            asp-for="Config.TermsAndConditions" rows="5" maxlength="2000"></textarea>
                        <div class="form-text">Additional terms and conditions to include on invoices.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Actions -->
        <div class="card">
            <div class="card-body">
                <button type="submit" class="btn btn-primary">
                    <i class="bi bi-save"></i> Save Settings
                </button>
                <a href="/Admin/CommissionInvoices" class="btn btn-outline-secondary ms-2">
                    <i class="bi bi-arrow-left"></i> Back to Invoices
                </a>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
